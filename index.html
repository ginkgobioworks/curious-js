<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>curious-js</h1><p>JavaScript consumer code for Curious APIs.</p>
<p><a href="https://travis-ci.org/ginkgobioworks/curious-js"><img src="https://travis-ci.org/ginkgobioworks/curious-js.svg?branch=v2" alt="Build Status"></a></p>
<h2>Usage</h2><h3>Installation</h3><p><code>curious-js</code> is available both from <a href="https://bower.io/search/?q=curious-js">bower</a> and from
<a href="https://www.npmjs.com/package/curious-js">npm</a>.</p>
<h3>Importing</h3><p><code>curious-js</code> has been written using the <a href="https://github.com/umdjs/umd">UMD</a> module pattern. This
pattern should be compatible with AMD/require.js, CommonJS/node.js, direct loading in the browser,
and Babel module variants. Requiring or loading the <code>curious.js</code> file will create a module (with the
default name <code>curious</code>) in whatever system you are using.</p>
<h3>Using</h3><p>There are two main parts to using Curious from JavaScript: <code>CuriousClient</code> and <code>CuriousQuery</code>.</p>
<p>First, create an instance of <code>CuriousClient</code> that points to your Curious server, providing a
server URL and a request function.</p>
<p><em>The server URL provided to the client should point to the Curious root endpoint, <strong>not</strong> to the
query endpoint (<code>/q/</code>) on the server</em>. The code will not break if you make this mistake, but the
behavior is deprecated.</p>
<p>You must also provide a request method. You are responsible for picking and using a request
method/transport layer that works for you. <code>CuriousClient</code> provides convenience wrappers for
common request methods, but you can make any asynchronous transport layer work by passing a custom
function as the second parameter to the client constructor. The function must take the URL as its
first parameter and an object payload as its second parameter, make a <code>POST</code> request to the curious
server, and return a Promise (or any thenable) that resolves to the JSON data returned by the
server. Note that if you're using jQuery, <code>jQuery.post</code> does not require any wrapping and can be
passed as the second parameter directly.</p>
<pre class="prettyprint source lang-javascript"><code>// Example using Axios
var curiousClient = new curious.CuriousClient(CURIOUS_URL, curious.CuriousClient.wrappers.axios(axios), ...);

// Example using a custom request method
var curiousClient = new curious.CuriousClient(CURIOUS_URL, function (url, data) {
  return new Promise(function (resolve, reject) {
    var result;
    var error;

    // Perform some asynchronous access

    if (error) {
      reject(error);
    } else {
      resolve(result);
    }
  });
}, ...);</code></pre><p>Then, construct a <code>CuriousQuery</code> and perform it on the server using the client. Attach any callbacks
to the Promise object returned by the <code>perform</code> method, or directly to the query object. They will
be executed in the order they were attached, before any callbacks attached later. The results of the
query will be passed to the first callback.</p>
<p>Here's a trivial example. The results, of course, depend on the schema on the Curious server; the
example uses a made up schema consiting of Document and Section entities in a 1:many relationship.</p>
<pre class="prettyprint source lang-javascript"><code>// A simple node.js use case; works similarly on the front end, minus module loading

const util = require('util');
const axios = require('axios');
const curious = require('curious');

// Define a client to connect to a curious server
const client = new curious.CuriousClient(
 'http://your-curious.com',
  curious.CuriousClient.wrappers.axios(axios),
  null, // serverArgs
  true, // quiet
  true  // camelCase
);

// The schema here is a simple 1:many relationship

// Make a query
const q = new curious.CuriousQuery('Document(id=12345)', 'documents')
  .follow('Document.section_set', 'sections');

// Perform that query with the client
q.perform(client).then((data) => {

  // In the callback, examine the resulting data
  try {
    console.log('data:');
    console.log(data);

    console.log('data.objects:');
    console.log(data.objects);

    console.log('data.objects.documents:');
    console.log(data.objects.documents);

    console.log('data.objects.documents[0].sections:');
    console.log(data.objects.documents[0].sections);

    console.log('data.objects.documents[0].sections[0].documents[0]:');
    console.log(data.objects.documents[0].sections[0].documents[0]);

    console.log('data.objects.sections:');
    console.log(data.objects.sections);

    console.log('data.objects.sections[0].documents:');
    console.log(data.objects.sections[0].documents);

    console.log('data.objects.sections[0].documents[0].sections[0]:');
    console.log(data.objects.sections[0].documents[0].sections[0]);
  } catch (e) {
    console.error(e);
  }

  return data;
}, console.error);</code></pre><p>The output from the example code above would look something like this, depending on the data:</p>
<pre class="prettyprint source lang-javascript"><code>data:
{ objects: { documents: [ [Object] ], sections: [ [Object], [Object] ] },
  trees: [ null, null ] }

data.objects:
{ documents:
   [ CuriousObject {
       __url: 'http://your-curious.com/document/12345',
       __model: 'Document',
       id: 12345,
       ...
       sections: [Object] } ],
  sections:
   [ CuriousObject {
       __url: null,
       __model: 'Section',
       id: 12205,
       documentId: 12345,
       ...
       documents: [Object] },
     CuriousObject {
       __url: null,
       __model: 'Section',
       id: 112403,
       documentId: 12345,
       ...
       documents: [Object] } ] }

data.objects.documents:
[ CuriousObject {
    __url: 'http://your-curious.com/document/12345',
    __model: 'Document',
    id: 12345,
    ...
    sections: [ [Object], [Object] ] } ]

data.objects.documents[0].sections:
[ CuriousObject {
    __url: null,
    __model: 'Section',
    id: 12205,
    documentId: 12345,
    ...
    documents: [ [Object] ] },
  CuriousObject {
    __url: null,
    __model: 'Section',
    id: 112403,
    documentId: 12345,
    ...
    documents: [ [Object] ] } ]

data.objects.documents[0].sections[0].documents[0]:
CuriousObject {
  __url: 'http://your-curious.com/document/12345',
  __model: 'Document',
  id: 12345,
  ...
  sections:
   [ CuriousObject {
       __url: null,
       __model: 'Section',
       id: 12205,
       documentId: 12345,
       ...
       documents: [Object] },
     CuriousObject {
       __url: null,
       __model: 'Section',
       id: 112403,
       documentId: 12345,
       ...
       documents: [Object] } ] }

data.objects.sections:
[ CuriousObject {
    __url: null,
    __model: 'Section',
    id: 12205,
    documentId: 12345,
    ...
    documents: [ [Object] ] },
  CuriousObject {
    __url: null,
    __model: 'Section',
    id: 112403,
    documentId: 12345,
    ...
    documents: [ [Object] ] } ]

data.objects.sections[0].documents:
[ CuriousObject {
    __url: 'http://your-curious.com/document/12345',
    __model: 'Document',
    id: 12345,
    ...
    sections: [ [Object], [Object] ] } ]

data.objects.sections[0].documents[0].sections[0]:
CuriousObject {
  __url: null,
  __model: 'Section',
  id: 12205,
  documentId: 12345,
  ...
  documents:
   [ CuriousObject {
       __url: 'http://your-curious.com/document/12345',
       __model: 'Document',
       id: 12345,
       ...
       sections: [Object] } ] }</code></pre><p>The API is explained in detail in the documentation.</p>
<h2>Development</h2><p>Development is carried out through an included Docker environment and Travis CI.</p>
<h3>CI</h3><p>Continuous integration is performed with <a href="https://travis-ci.org/ginkgobioworks/curious-js">Travis CI</a>.
And any tagged commits on the main branch (v2), which update bower by default, are also automatically
deployed to NPM.</p>
<h3>Deployment</h3><p>To deploy the code:</p>
<ol>
<li>Get on the defaulmaint branch <code>git checkout v2</code> [<em>not master</em>]</li>
<li>Bump the version: <code>npm version [type] -m &quot;Bump version to %s&quot;</code></li>
<li>Push to the origin with tags: <code>git push &amp;&amp; git push ---tags</code></li>
</ol>
<p>Minification and source map generation happens automatically before deployment and the minified code
is deployed to both npm and bower. No minified code should be checked in.</p>
<h3>Docker</h3><p>The project provides a Dockerfile that builds a container capable of running the unit tests and
scripts. To run the tests, bring up the container with <code>docker-compose up</code>. Any of the scripts shown
to be run below from a shell with <code>npm run</code> can be executed in an instance of the container with
<code>docker-compose run --rm [script name]</code>.</p>
<h3>REPL</h3><p>A script that opens up a node.js REPL and loads curious.js as <code>curious</code> is available via
<code>npm run repl</code>.</p>
<h3>Test framework</h3><p>The tests are written in <a href="https://mochajs.org/">mocha</a>, with <a href="http://chaijs.com/">chai</a> expect-style
assertions. Tests can be run with <code>npm test</code>.</p>
<p>Coding conventions and linting are enforced at the unit test level but can also be run independently
with <code>npm run lint</code>.</p>
<h3>Documentation</h3><p>Any new code added to <code>curious.js</code> must be documented in a manner consistent with existing
documentation.</p>
<p>JSDoc documentation can be generated into the <code>doc/</code> subdirectory from the source code and README
with <code>npm run make_doc</code>. It can be updated on the project website automatically with <code>npm run
release_doc</code>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-curious.html">curious</a></li></ul><h3>Classes</h3><ul><li><a href="module-curious.CuriousClient.html">CuriousClient</a></li><li><a href="module-curious.CuriousObjects.defaultType.html">defaultType</a></li><li><a href="module-curious.CuriousQuery.html">CuriousQuery</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-curious.CuriousClient.wrappers.html">wrappers</a></li><li><a href="module-curious.CuriousObjects.html">CuriousObjects</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Sat Dec 10 2016 03:31:07 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>